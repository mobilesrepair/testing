<!DOCTYPE html>
<html>
<body style="font-family:sans-serif;text-align:center">

<h2>Register</h2>
<input id="rEmail" placeholder="Email">
<button onclick="register()">Register</button>

<input id="rOtp" placeholder="OTP">
<button onclick="verifyRegister()">Verify</button>

<hr>

<h2>Login</h2>
<input id="lEmail" placeholder="Email">
<button onclick="login()">Send Login OTP</button>

<input id="lOtp" placeholder="OTP">
<button onclick="verifyLogin()">Login</button>

<script>

const API="https://plain-pond-c616.r3dvelvet92.workers.dev";

async function register(){
const r=await fetch(API+"/register",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({email:rEmail.value})
});
const d=await r.json();
alert("REGISTER OTP: "+d.otp);
}

async function verifyRegister(){
await fetch(API+"/verify-register",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({email:rEmail.value,otp:rOtp.value})
});
alert("Account Verified");
}

async function login(){
const r=await fetch(API+"/login",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({email:lEmail.value})
});
const d=await r.json();
alert("LOGIN OTP: "+d.otp);
}

async function verifyLogin(){
const r=await fetch(API+"/verify-login",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({email:lEmail.value,otp:lOtp.value})
});
const d=await r.json();

if(d.success){
alert("LOGIN SUCCESS");
}
}

</script>

</body>
</html>
