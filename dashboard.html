<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Dashboard</title>

<style>
body{
font-family:Segoe UI;
background:#f4f6f9;
margin:0;
}

.top{
background:#0b57d0;
color:white;
padding:15px;
display:flex;
justify-content:space-between;
align-items:center;
}

.container{
max-width:500px;
margin:40px auto;
background:white;
padding:25px;
border-radius:12px;
box-shadow:0 10px 30px rgba(0,0,0,.1);
}

input,button{
width:100%;
padding:12px;
margin-top:10px;
}

button{
background:#0b57d0;
color:white;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
}

.result{
margin-top:15px;
white-space:pre-wrap;
background:#f1f3f4;
padding:12px;
border-radius:8px;
min-height:80px;
}

.credit{
font-size:14px;
margin-top:5px;
opacity:.9;
}
</style>
</head>

<body>

<div class="top">
<div>
üì± CheckPhone Dashboard
<div class="credit" id="creditBox"></div>
</div>

<button onclick="logout()">Logout</button>
</div>

<div class="container">

<h3>Check IMEI</h3>

<input id="imei" placeholder="Enter IMEI">
<button onclick="checkIMEI()">Check Device</button>

<div class="result" id="result">Ready...</div>

</div>

<script>

const API="https://plain-pond-c616.r3dvelvet92.workers.dev";

// ================= SESSION CHECK =================
const email = localStorage.getItem("email");

if(!email){
alert("Please login first");
location="index.html";
}

// show user
creditBox.innerText="Logged as: "+email;


// ================= CHECK IMEI =================
async function checkIMEI(){

const imeiValue=document.getElementById("imei").value;

if(!imeiValue){
alert("Enter IMEI");
return;
}

result.innerText="Checking device...";

try{

const res = await fetch(API+"/check-imei",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
email:email,
imei:imeiValue
})
});

const text = await res.text();

result.innerText=text;

}catch(e){
result.innerText="Connection error ‚ùå";
console.log(e);
}

}


// ================= LOGOUT =================
function logout(){
localStorage.clear();
location="index.html";
}

</script>

</body>
</html>
